<div class="modal-overlay" (click)="onOverlayClick($event)">
  <div class="modal-content">

    <div class="modal-header">
      <h2>Come funziona <span style="color: var(--primary);">Trusty</span>?</h2>
    </div>

    <div class="modal-body">
      <section class="info-section">
        <h3>
          <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"/>
            <line x1="2" y1="12" x2="22" y2="12"/>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
          </svg>
          Verifiche con API esterne
        </h3>
        <p>Trusty interroga <strong>servizi esterni affidabili</strong> per ottenere dati verificati:</p>
        <ul>
          <li><strong>Google Safe Browsing</strong> — Database Google di siti con malware o phishing</li>
          <li><strong>Età del dominio (RDAP)</strong> — Quando è stato registrato il dominio</li>
          <li><strong>Certificato SSL</strong> — Verifica diretta della connessione sicura</li>
          <li><strong>Reputazione dominio</strong> — Analisi fraud score e attività sospette</li>
          <li><strong>Recensioni aggregate</strong> — Trustpilot, Recensioni Verificate</li>
        </ul>
      </section>

      <section class="info-section">
        <h3>
          <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"/>
            <line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
          Controlli proprietari Trusty
        </h3>
        <p>Analisi sviluppate da noi per il <strong>mercato italiano</strong>:</p>
        <ul>
          <li><strong>Typosquatting</strong> — Domini simili a brand famosi (es. amaz0n.com)</li>
          <li><strong>TLD sospetti</strong> — Estensioni spesso usate per truffe (.xyz, .top)</li>
          <li><strong>Pattern sospetti</strong> — Caratteri e strutture anomale nel dominio</li>
          <li><strong>Indicatori italiani</strong> — Presenza P.IVA, sede legale, pagine obbligatorie</li>
        </ul>
      </section>

      <section class="info-section">
        <h3>
          <svg class="section-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="20" x2="18" y2="10"/>
            <line x1="12" y1="20" x2="12" y2="4"/>
            <line x1="6" y1="20" x2="6" y2="14"/>
          </svg>
          Come calcoliamo il punteggio
        </h3>
        <p>Ogni controllo ha un peso specifico nel punteggio finale:</p>
        <div class="score-breakdown">
          <div class="score-item">
            <span class="score-label">Safe Browsing</span>
            <span class="score-weight">Filtro</span>
          </div>
          <div class="score-item">
            <span class="score-label">Reputazione</span>
            <span class="score-weight">30%</span>
          </div>
          <div class="score-item">
            <span class="score-label">Recensioni</span>
            <span class="score-weight">30%</span>
          </div>
          <div class="score-item">
            <span class="score-label">Certificato SSL</span>
            <span class="score-weight">20%</span>
          </div>
          <div class="score-item">
            <span class="score-label">Età dominio</span>
            <span class="score-weight">10%</span>
          </div>
          <div class="score-item">
            <span class="score-label">Controlli Trusty</span>
            <span class="score-weight">10%</span>
          </div>
        </div>
        <p style="font-size: 0.85em; margin-top: 0.5em; opacity: 0.8;">
          Siti con meno di 20 recensioni non possono superare il 60%.
        </p>
      </section>

      <section class="info-section disclaimer-section">
        <h3>
          <svg class="section-icon warning" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          Importante
        </h3>
        <p>
          Trusty fornisce una <strong>stima automatizzata</strong> basata su fattori pubblicamente verificabili.
          Tuttavia, <strong>nessun sistema è infallibile</strong>: alcuni siti fraudolenti potrebbero adottare
          strategie sofisticate per ingannare i controlli automatici.
        </p>
        <p>
          <strong>Verifica sempre autonomamente</strong> prima di effettuare acquisti, specialmente per
          importi elevati. In caso di dubbi, preferisci metodi di pagamento che offrono protezione acquirenti.
        </p>
      </section>
    </div>

    <div class="modal-footer">
      <button class="got-it-btn" (click)="close.emit()">Ho capito</button>
    </div>
  </div>
</div>
